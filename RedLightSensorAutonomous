package com.qualcomm.ftcrobotcontroller.opmodes;

import com.qualcomm.ftcrobotcontroller.opmodes.BulletOpMode;
import com.qualcomm.robotcore.hardware.UltrasonicSensor;

public class RedLightSensorAutonomous extends BulletOpMode {
    @Override
    public void initialize() {
    }

    @Override
    public void Update() {
    }

    @Override
    public void runOpMode() throws InterruptedException {
        super.Init();
        waitForStart();
        while (opModeIsActive()) {
            SkirtServoR.setPosition(SERVO_SKIRT_DOWNR);
            SkirtServoL.setPosition(SERVO_SKIRT_DOWNL);
            Rocky.start();

            lightsensor();
            sleep(500);
//            goTurn(45, RIGHT, LEFT_FRONT_POWER * 1.85, RIGHT_FRONT_POWER * 1.85, LEFT_BACK_POWER, RIGHT_BACK_POWER);
            if (goForward(5 , LEFT_FRONT_POWER,RIGHT_FRONT_POWER,LEFT_BACK_POWER,RIGHT_BACK_POWER,5000 ))
                return;
//            sleep(500);
            lightsensor();
            goTurn(120, LEFT, LEFT_FRONT_POWER, RIGHT_FRONT_POWER, LEFT_BACK_POWER, RIGHT_BACK_POWER);
            sleep(500);
            double ultrasonicvalue = ultrasonicSensor.getUltrasonicLevel();
            while (ultrasonicvalue > 22) {
                ultrasonicvalue = ultrasonicSensor.getUltrasonicLevel();
                motorDrive(LEFT_FRONT_POWER, RIGHT_FRONT_POWER, LEFT_BACK_POWER, RIGHT_BACK_POWER);
            }
            StopDriveMotors();
            //if (goForward(28 , LEFT_FRONT_POWER , RIGHT_FRONT_POWER, LEFT_BACK_POWER , RIGHT_BACK_POWER,5000));//accelerate into wall
            sleep(500);
            motorArmRotate(.12, 1);
            sleep(5500);
            StopArmMotors();
            sleep(2000);
            ArmLiftUp();
            sleep(1000);
            ArmLiftStop();
            sleep(500);
            motorArmRotate(.12, -1);
            sleep(500);
            StopArmMotors();
            sleep(500);
            goForward(-5 , LEFT_FRONT_POWER,RIGHT_FRONT_POWER, LEFT_BACK_POWER, RIGHT_BACK_POWER, 5000);//might not work, if doesnt change all motor powers to negative and distance positive
            sleep(500);
            StopDriveMotors();
            break;


        }
    }
}
